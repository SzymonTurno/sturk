<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Cantil: include/cn/broker.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Cantil<span id="projectnumber">&#160;1.0.0</span>
   </div>
   <div id="projectbrief">Scalable publish-subscribe implementation.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="dir_91b676d929b41e53e001b884a607740c.html">cn</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">broker.h File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Message broker.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdarg.h&gt;</code><br />
<code>#include &lt;stddef.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for broker.h:</div>
<div class="dyncontent">
<div class="center"><img src="cn_2broker_8h__incl.png" border="0" usemap="#ainclude_2cn_2broker_8h" alt=""/></div>
<map name="ainclude_2cn_2broker_8h" id="ainclude_2cn_2broker_8h">
<area shape="rect" title="Message broker." alt="" coords="20,5,164,31"/>
<area shape="rect" title=" " alt="" coords="5,79,80,104"/>
<area shape="poly" title=" " alt="" coords="86,33,61,69,56,66,82,29"/>
<area shape="rect" title=" " alt="" coords="104,79,179,104"/>
<area shape="poly" title=" " alt="" coords="102,29,128,66,123,69,98,33"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="cn_2broker_8h__dep__incl.png" border="0" usemap="#ainclude_2cn_2broker_8hdep" alt=""/></div>
<map name="ainclude_2cn_2broker_8hdep" id="ainclude_2cn_2broker_8hdep">
<area shape="rect" title="Message broker." alt="" coords="16,5,160,31"/>
<area shape="rect" href="cantil_2broker_8h.html" title=" " alt="" coords="5,79,171,104"/>
<area shape="poly" title=" " alt="" coords="91,44,91,79,85,79,85,44"/>
</map>
</div>
</div>
<p><a href="cn_2broker_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structCnLoadVt.html">CnLoadVt</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Vtable for message construction.  <a href="structCnLoadVt.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:aca06eb77448bba60e91668222990239d" id="r_aca06eb77448bba60e91668222990239d"><td class="memItemLeft" align="right" valign="top">typedef char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cn_2broker_8h.html#aca06eb77448bba60e91668222990239d">CnLoad</a></td></tr>
<tr class="memdesc:aca06eb77448bba60e91668222990239d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Opaque data type that represents the message load.  <br /></td></tr>
<tr class="separator:aca06eb77448bba60e91668222990239d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7994dbebbca4ce4f9f19d811edda0905" id="r_a7994dbebbca4ce4f9f19d811edda0905"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="cn_2broker_8h.html#a7994dbebbca4ce4f9f19d811edda0905">CnBroker</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cn_2broker_8h.html#a7994dbebbca4ce4f9f19d811edda0905">CnBroker</a></td></tr>
<tr class="memdesc:a7994dbebbca4ce4f9f19d811edda0905"><td class="mdescLeft">&#160;</td><td class="mdescRight">The message broker.  <br /></td></tr>
<tr class="separator:a7994dbebbca4ce4f9f19d811edda0905"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a070ea82c82ee7d183aee382a68dd642a" id="r_a070ea82c82ee7d183aee382a68dd642a"><td class="memItemLeft" align="right" valign="top"><a id="a070ea82c82ee7d183aee382a68dd642a" name="a070ea82c82ee7d183aee382a68dd642a"></a>
typedef struct <a class="el" href="cn_2broker_8h.html#a070ea82c82ee7d183aee382a68dd642a">CnSubscriber</a>&#160;</td><td class="memItemRight" valign="bottom"><b>CnSubscriber</b></td></tr>
<tr class="memdesc:a070ea82c82ee7d183aee382a68dd642a"><td class="mdescLeft">&#160;</td><td class="mdescRight">The subscriber. <br /></td></tr>
<tr class="separator:a070ea82c82ee7d183aee382a68dd642a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa04ba136293d02105197879ddb3f7f4d" id="r_aa04ba136293d02105197879ddb3f7f4d"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="cn_2broker_8h.html#aa04ba136293d02105197879ddb3f7f4d">CnChannel</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cn_2broker_8h.html#aa04ba136293d02105197879ddb3f7f4d">CnChannel</a></td></tr>
<tr class="memdesc:aa04ba136293d02105197879ddb3f7f4d"><td class="mdescLeft">&#160;</td><td class="mdescRight">The channel for messages.  <br /></td></tr>
<tr class="separator:aa04ba136293d02105197879ddb3f7f4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:af579f0866c8f3736dfed7e90838ccea9" id="r_af579f0866c8f3736dfed7e90838ccea9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cn_2broker_8h.html#af579f0866c8f3736dfed7e90838ccea9">cn_publish</a> (<a class="el" href="cn_2broker_8h.html#aa04ba136293d02105197879ddb3f7f4d">CnChannel</a> *ch,...)</td></tr>
<tr class="memdesc:af579f0866c8f3736dfed7e90838ccea9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Broadcast the message.  <br /></td></tr>
<tr class="separator:af579f0866c8f3736dfed7e90838ccea9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a355768d612b81c3797904f708ace56cd" id="r_a355768d612b81c3797904f708ace56cd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cn_2broker_8h.html#a355768d612b81c3797904f708ace56cd">cn_subscribe</a> (<a class="el" href="cn_2broker_8h.html#a070ea82c82ee7d183aee382a68dd642a">CnSubscriber</a> *sber, const char *topic)</td></tr>
<tr class="memdesc:a355768d612b81c3797904f708ace56cd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Subscribe to a topic.  <br /></td></tr>
<tr class="separator:a355768d612b81c3797904f708ace56cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a531e7ca0082769f0bc5ed3ad91f39214" id="r_a531e7ca0082769f0bc5ed3ad91f39214"><td class="memItemLeft" align="right" valign="top"><a class="el" href="cn_2broker_8h.html#a7994dbebbca4ce4f9f19d811edda0905">CnBroker</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cn_2broker_8h.html#a531e7ca0082769f0bc5ed3ad91f39214">cn_broker_create</a> (const struct <a class="el" href="structCnLoadVt.html">CnLoadVt</a> *vp)</td></tr>
<tr class="memdesc:a531e7ca0082769f0bc5ed3ad91f39214"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create the message broker.  <br /></td></tr>
<tr class="separator:a531e7ca0082769f0bc5ed3ad91f39214"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5174ed4b4a5c05341e4837610350b3ed" id="r_a5174ed4b4a5c05341e4837610350b3ed"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cn_2broker_8h.html#a5174ed4b4a5c05341e4837610350b3ed">cn_broker_destroy</a> (<a class="el" href="cn_2broker_8h.html#a7994dbebbca4ce4f9f19d811edda0905">CnBroker</a> *broker)</td></tr>
<tr class="memdesc:a5174ed4b4a5c05341e4837610350b3ed"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroy the message broker.  <br /></td></tr>
<tr class="separator:a5174ed4b4a5c05341e4837610350b3ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a382b8fa4e6d431e97abc4caef5346cea" id="r_a382b8fa4e6d431e97abc4caef5346cea"><td class="memItemLeft" align="right" valign="top"><a class="el" href="cn_2broker_8h.html#aa04ba136293d02105197879ddb3f7f4d">CnChannel</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cn_2broker_8h.html#a382b8fa4e6d431e97abc4caef5346cea">cn_broker_search</a> (<a class="el" href="cn_2broker_8h.html#a7994dbebbca4ce4f9f19d811edda0905">CnBroker</a> *broker, const char *topic)</td></tr>
<tr class="memdesc:a382b8fa4e6d431e97abc4caef5346cea"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find the channel that is assigned to the given topic.  <br /></td></tr>
<tr class="separator:a382b8fa4e6d431e97abc4caef5346cea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b6ba9dff9e061e03f36002828acbd5b" id="r_a5b6ba9dff9e061e03f36002828acbd5b"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cn_2broker_8h.html#a5b6ba9dff9e061e03f36002828acbd5b">cn_channel_gettopic</a> (const <a class="el" href="cn_2broker_8h.html#aa04ba136293d02105197879ddb3f7f4d">CnChannel</a> *ch)</td></tr>
<tr class="memdesc:a5b6ba9dff9e061e03f36002828acbd5b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the topic for the given channel.  <br /></td></tr>
<tr class="separator:a5b6ba9dff9e061e03f36002828acbd5b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afaea923368f1dd039a2a758af93c7cc5" id="r_afaea923368f1dd039a2a758af93c7cc5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="cn_2broker_8h.html#a070ea82c82ee7d183aee382a68dd642a">CnSubscriber</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cn_2broker_8h.html#afaea923368f1dd039a2a758af93c7cc5">cn_subscriber_create</a> (<a class="el" href="cn_2broker_8h.html#a7994dbebbca4ce4f9f19d811edda0905">CnBroker</a> *broker)</td></tr>
<tr class="memdesc:afaea923368f1dd039a2a758af93c7cc5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create the subscriber.  <br /></td></tr>
<tr class="separator:afaea923368f1dd039a2a758af93c7cc5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64cb7e8210d3b5a3288c77f07fffd438" id="r_a64cb7e8210d3b5a3288c77f07fffd438"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cn_2broker_8h.html#a64cb7e8210d3b5a3288c77f07fffd438">cn_subscriber_destroy</a> (<a class="el" href="cn_2broker_8h.html#a070ea82c82ee7d183aee382a68dd642a">CnSubscriber</a> *sber)</td></tr>
<tr class="memdesc:a64cb7e8210d3b5a3288c77f07fffd438"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroy the subscriber.  <br /></td></tr>
<tr class="separator:a64cb7e8210d3b5a3288c77f07fffd438"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a295b2bf867751fe73266a7c7180ec053" id="r_a295b2bf867751fe73266a7c7180ec053"><td class="memItemLeft" align="right" valign="top"><a class="el" href="cn_2broker_8h.html#aca06eb77448bba60e91668222990239d">CnLoad</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cn_2broker_8h.html#a295b2bf867751fe73266a7c7180ec053">cn_subscriber_await</a> (<a class="el" href="cn_2broker_8h.html#a070ea82c82ee7d183aee382a68dd642a">CnSubscriber</a> *sber)</td></tr>
<tr class="memdesc:a295b2bf867751fe73266a7c7180ec053"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wait for the messages that are wanted by the subscriber.  <br /></td></tr>
<tr class="separator:a295b2bf867751fe73266a7c7180ec053"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abedc2b3d7f0c3b9dafcd1a18ace5c7d1" id="r_abedc2b3d7f0c3b9dafcd1a18ace5c7d1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="cn_2broker_8h.html#aca06eb77448bba60e91668222990239d">CnLoad</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cn_2broker_8h.html#abedc2b3d7f0c3b9dafcd1a18ace5c7d1">cn_subscriber_poll</a> (<a class="el" href="cn_2broker_8h.html#a070ea82c82ee7d183aee382a68dd642a">CnSubscriber</a> *sber)</td></tr>
<tr class="memdesc:abedc2b3d7f0c3b9dafcd1a18ace5c7d1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Poll for the messages that are wanted by the subscriber.  <br /></td></tr>
<tr class="separator:abedc2b3d7f0c3b9dafcd1a18ace5c7d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b8fa36ed77ba98f27b44be5ed011b61" id="r_a4b8fa36ed77ba98f27b44be5ed011b61"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cn_2broker_8h.html#a4b8fa36ed77ba98f27b44be5ed011b61">cn_subscriber_unload</a> (<a class="el" href="cn_2broker_8h.html#a070ea82c82ee7d183aee382a68dd642a">CnSubscriber</a> *sber)</td></tr>
<tr class="memdesc:a4b8fa36ed77ba98f27b44be5ed011b61"><td class="mdescLeft">&#160;</td><td class="mdescRight">Inform the broker that the message can be released for the given subscriber.  <br /></td></tr>
<tr class="separator:a4b8fa36ed77ba98f27b44be5ed011b61"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a777ee42507a689c8f75a0c95f241cf74" id="r_a777ee42507a689c8f75a0c95f241cf74"><td class="memItemLeft" align="right" valign="top"><a class="el" href="cn_2broker_8h.html#aa04ba136293d02105197879ddb3f7f4d">CnChannel</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cn_2broker_8h.html#a777ee42507a689c8f75a0c95f241cf74">cn_load_getchan</a> (const <a class="el" href="cn_2broker_8h.html#aca06eb77448bba60e91668222990239d">CnLoad</a> *load)</td></tr>
<tr class="memdesc:a777ee42507a689c8f75a0c95f241cf74"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the source channel of the message.  <br /></td></tr>
<tr class="separator:a777ee42507a689c8f75a0c95f241cf74"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Message broker. </p>
<p>This header file provides data types and functions that implement the publish-subscribe messaging pattern. </p>
</div><h2 class="groupheader">Typedef Documentation</h2>
<a id="a7994dbebbca4ce4f9f19d811edda0905" name="a7994dbebbca4ce4f9f19d811edda0905"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7994dbebbca4ce4f9f19d811edda0905">&#9670;&#160;</a></span>CnBroker</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="cn_2broker_8h.html#a7994dbebbca4ce4f9f19d811edda0905">CnBroker</a> <a class="el" href="cn_2broker_8h.html#a7994dbebbca4ce4f9f19d811edda0905">CnBroker</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The message broker. </p>
<p>The broker holds the list of all subscribers (CnSubscriber) in usage and a dictionary of channels (CnChannel). All the messaging done through channels created by the same broker will also use the same API for message construction (<a class="el" href="structCnLoadVt.html" title="Vtable for message construction.">CnLoadVt</a>). </p>

</div>
</div>
<a id="aa04ba136293d02105197879ddb3f7f4d" name="aa04ba136293d02105197879ddb3f7f4d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa04ba136293d02105197879ddb3f7f4d">&#9670;&#160;</a></span>CnChannel</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="cn_2broker_8h.html#aa04ba136293d02105197879ddb3f7f4d">CnChannel</a> <a class="el" href="cn_2broker_8h.html#aa04ba136293d02105197879ddb3f7f4d">CnChannel</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The channel for messages. </p>
<dl class="section note"><dt>Note</dt><dd>Channel is related to the topic through the dictionary owned by the message broker. </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="cn_2broker_8h.html#a382b8fa4e6d431e97abc4caef5346cea" title="Find the channel that is assigned to the given topic.">cn_broker_search()</a> </dd></dl>

</div>
</div>
<a id="aca06eb77448bba60e91668222990239d" name="aca06eb77448bba60e91668222990239d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aca06eb77448bba60e91668222990239d">&#9670;&#160;</a></span>CnLoad</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef char <a class="el" href="cn_2broker_8h.html#aca06eb77448bba60e91668222990239d">CnLoad</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Opaque data type that represents the message load. </p>
<p>The memory for each message has two contexts:</p><ol type="1">
<li>direct - allocated from the memory pool;</li>
<li>indirect - optional, allocated within <a class="el" href="structCnLoadVt.html#a6da559d4a0e2c44ba2dcd520b72e5f1f" title="Constructor callback for the message.">CnLoadVt::ctor</a>.</li>
</ol>
<p>It is for the user to decide how to use those contexts by defining the message constructor (<a class="el" href="structCnLoadVt.html#a6da559d4a0e2c44ba2dcd520b72e5f1f" title="Constructor callback for the message.">CnLoadVt::ctor</a>).</p>
<p>Direct context is a contiguous memory block allocated from fixed-size memory pool and its size is constant for all messages. The size of the block is a multiple of the size of the metadata, big enough to hold one instance of the metadata and one instance of the user defined load. The size of the load for the direct context is defined with the <a class="el" href="structCnLoadVt.html#a185a26f714eed4db0f55de1739c98538" title="Callback for obtaining the size of the load.">CnLoadVt::size</a> callback. </p><dl class="section see"><dt>See also</dt><dd><a class="el" href="cn_2pool_8h.html#a44cc996b1dc74988ab3a5de329120ff7" title="pool.">CnPool</a></dd></dl>
<a class="anchor" id="direct_context"></a>
<table class="doxtable">
<caption>Direct context</caption>
<tr>
<th>Array </th><th>Load (CnLoad*) + meta </th></tr>
<tr>
<td>0 </td><td rowspan="3">load </td></tr>
<tr>
<td>... </td></tr>
<tr>
<td>n-1 </td></tr>
<tr>
<td>n </td><td>meta </td></tr>
</table>
<p>The indirect context is optional and it is everything that is allocated by the contructor callback - <a class="el" href="structCnLoadVt.html#a6da559d4a0e2c44ba2dcd520b72e5f1f" title="Constructor callback for the message.">CnLoadVt::ctor</a> and that is accessible through pointers placed somewhere in the direct context. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a531e7ca0082769f0bc5ed3ad91f39214" name="a531e7ca0082769f0bc5ed3ad91f39214"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a531e7ca0082769f0bc5ed3ad91f39214">&#9670;&#160;</a></span>cn_broker_create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="cn_2broker_8h.html#a7994dbebbca4ce4f9f19d811edda0905">CnBroker</a> * cn_broker_create </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structCnLoadVt.html">CnLoadVt</a> *&#160;</td>
          <td class="paramname"><em>vp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create the message broker. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">vp</td><td>The pointer to the vtable for the CnLoad.</td></tr>
  </table>
  </dd>
</dl>
<p>The chosen vtable will influence the behaviour of the functions that are responsible for constructing and receiving the messages:</p><ul>
<li><a class="el" href="cn_2broker_8h.html#af579f0866c8f3736dfed7e90838ccea9" title="Broadcast the message.">cn_publish()</a>,</li>
<li><a class="el" href="cn_2broker_8h.html#a295b2bf867751fe73266a7c7180ec053" title="Wait for the messages that are wanted by the subscriber.">cn_subscriber_await()</a>,</li>
<li><a class="el" href="cn_2broker_8h.html#abedc2b3d7f0c3b9dafcd1a18ace5c7d1" title="Poll for the messages that are wanted by the subscriber.">cn_subscriber_poll()</a>.</li>
</ul>
<dl class="section return"><dt>Returns</dt><dd>The pointer to the new broker. </dd></dl>

</div>
</div>
<a id="a5174ed4b4a5c05341e4837610350b3ed" name="a5174ed4b4a5c05341e4837610350b3ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5174ed4b4a5c05341e4837610350b3ed">&#9670;&#160;</a></span>cn_broker_destroy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cn_broker_destroy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cn_2broker_8h.html#a7994dbebbca4ce4f9f19d811edda0905">CnBroker</a> *&#160;</td>
          <td class="paramname"><em>broker</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Destroy the message broker. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">broker</td><td>The pointer to the broker. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a382b8fa4e6d431e97abc4caef5346cea" name="a382b8fa4e6d431e97abc4caef5346cea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a382b8fa4e6d431e97abc4caef5346cea">&#9670;&#160;</a></span>cn_broker_search()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="cn_2broker_8h.html#aa04ba136293d02105197879ddb3f7f4d">CnChannel</a> * cn_broker_search </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cn_2broker_8h.html#a7994dbebbca4ce4f9f19d811edda0905">CnBroker</a> *&#160;</td>
          <td class="paramname"><em>broker</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>topic</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Find the channel that is assigned to the given topic. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">broker</td><td>The message broker. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">topic</td><td>The topic. It is also used as the key for the channel's dictionary.</td></tr>
  </table>
  </dd>
</dl>
<p>This function also creates the channel if none is found.</p>
<dl class="section return"><dt>Returns</dt><dd>The pointer to the channel or NULL if NULL topic was passed. </dd></dl>

</div>
</div>
<a id="a5b6ba9dff9e061e03f36002828acbd5b" name="a5b6ba9dff9e061e03f36002828acbd5b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5b6ba9dff9e061e03f36002828acbd5b">&#9670;&#160;</a></span>cn_channel_gettopic()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char * cn_channel_gettopic </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="cn_2broker_8h.html#aa04ba136293d02105197879ddb3f7f4d">CnChannel</a> *&#160;</td>
          <td class="paramname"><em>ch</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the topic for the given channel. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ch</td><td>The channel.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The topic (named channel). </dd></dl>

</div>
</div>
<a id="a777ee42507a689c8f75a0c95f241cf74" name="a777ee42507a689c8f75a0c95f241cf74"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a777ee42507a689c8f75a0c95f241cf74">&#9670;&#160;</a></span>cn_load_getchan()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="cn_2broker_8h.html#aa04ba136293d02105197879ddb3f7f4d">CnChannel</a> * cn_load_getchan </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="cn_2broker_8h.html#aca06eb77448bba60e91668222990239d">CnLoad</a> *&#160;</td>
          <td class="paramname"><em>load</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the source channel of the message. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">load</td><td>The pointer to the message load.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The channel </dd></dl>

</div>
</div>
<a id="af579f0866c8f3736dfed7e90838ccea9" name="af579f0866c8f3736dfed7e90838ccea9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af579f0866c8f3736dfed7e90838ccea9">&#9670;&#160;</a></span>cn_publish()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cn_publish </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cn_2broker_8h.html#aa04ba136293d02105197879ddb3f7f4d">CnChannel</a> *&#160;</td>
          <td class="paramname"><em>ch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Broadcast the message. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">ch</td><td>The channel to which the message is sent. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">...</td><td>The list of arguments used by the <a class="el" href="structCnLoadVt.html#a6da559d4a0e2c44ba2dcd520b72e5f1f" title="Constructor callback for the message.">CnLoadVt::ctor</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Channels without any subscribers are allowed. Publishing to such channel is safe and it does not have any meaningful behaviour (it does "nothing"). </dd></dl>

</div>
</div>
<a id="a355768d612b81c3797904f708ace56cd" name="a355768d612b81c3797904f708ace56cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a355768d612b81c3797904f708ace56cd">&#9670;&#160;</a></span>cn_subscribe()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cn_subscribe </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cn_2broker_8h.html#a070ea82c82ee7d183aee382a68dd642a">CnSubscriber</a> *&#160;</td>
          <td class="paramname"><em>sber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>topic</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Subscribe to a topic. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">sber</td><td>The subscriber that expresses the interest in the topic. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">topic</td><td>The topic to which the subscription will be made. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a295b2bf867751fe73266a7c7180ec053" name="a295b2bf867751fe73266a7c7180ec053"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a295b2bf867751fe73266a7c7180ec053">&#9670;&#160;</a></span>cn_subscriber_await()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="cn_2broker_8h.html#aca06eb77448bba60e91668222990239d">CnLoad</a> * cn_subscriber_await </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cn_2broker_8h.html#a070ea82c82ee7d183aee382a68dd642a">CnSubscriber</a> *&#160;</td>
          <td class="paramname"><em>sber</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Wait for the messages that are wanted by the subscriber. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">sber</td><td>The pointer to the subscriber.</td></tr>
  </table>
  </dd>
</dl>
<p>This function will receive the message immediately and return the load, if the subscriber's message queue is not empty. Otherwise, with multithreading enabled, this will block the thread that has called this function until some other thread publishes to topic that the given subscriber is interested in. With a single thread application, the blocking is not supported.</p>
<dl class="section return"><dt>Returns</dt><dd>The load. </dd></dl>

</div>
</div>
<a id="afaea923368f1dd039a2a758af93c7cc5" name="afaea923368f1dd039a2a758af93c7cc5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afaea923368f1dd039a2a758af93c7cc5">&#9670;&#160;</a></span>cn_subscriber_create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="cn_2broker_8h.html#a070ea82c82ee7d183aee382a68dd642a">CnSubscriber</a> * cn_subscriber_create </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cn_2broker_8h.html#a7994dbebbca4ce4f9f19d811edda0905">CnBroker</a> *&#160;</td>
          <td class="paramname"><em>broker</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create the subscriber. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">broker</td><td>The message broker.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The pointer to the new subscriber. </dd></dl>

</div>
</div>
<a id="a64cb7e8210d3b5a3288c77f07fffd438" name="a64cb7e8210d3b5a3288c77f07fffd438"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a64cb7e8210d3b5a3288c77f07fffd438">&#9670;&#160;</a></span>cn_subscriber_destroy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cn_subscriber_destroy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cn_2broker_8h.html#a070ea82c82ee7d183aee382a68dd642a">CnSubscriber</a> *&#160;</td>
          <td class="paramname"><em>sber</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Destroy the subscriber. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">sber</td><td>The pointer to the subscriber. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="abedc2b3d7f0c3b9dafcd1a18ace5c7d1" name="abedc2b3d7f0c3b9dafcd1a18ace5c7d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abedc2b3d7f0c3b9dafcd1a18ace5c7d1">&#9670;&#160;</a></span>cn_subscriber_poll()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="cn_2broker_8h.html#aca06eb77448bba60e91668222990239d">CnLoad</a> * cn_subscriber_poll </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cn_2broker_8h.html#a070ea82c82ee7d183aee382a68dd642a">CnSubscriber</a> *&#160;</td>
          <td class="paramname"><em>sber</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Poll for the messages that are wanted by the subscriber. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">sber</td><td>The pointer to the subscriber.</td></tr>
  </table>
  </dd>
</dl>
<p>This function will receive the message and return the load, if the subscriber's message queue is not empty. Otherwise, it will return NULL.</p>
<dl class="section return"><dt>Returns</dt><dd>The load. </dd></dl>

</div>
</div>
<a id="a4b8fa36ed77ba98f27b44be5ed011b61" name="a4b8fa36ed77ba98f27b44be5ed011b61"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b8fa36ed77ba98f27b44be5ed011b61">&#9670;&#160;</a></span>cn_subscriber_unload()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cn_subscriber_unload </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cn_2broker_8h.html#a070ea82c82ee7d183aee382a68dd642a">CnSubscriber</a> *&#160;</td>
          <td class="paramname"><em>sber</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Inform the broker that the message can be released for the given subscriber. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">sber</td><td>The pointer to the subscriber.</td></tr>
  </table>
  </dd>
</dl>
<p>Release the last message received by the subscriber - decrement the subscribers counter for the message. When the counter hits 0, the message is returned to the memory pool.</p>
<dl class="section note"><dt>Note</dt><dd>The functions <a class="el" href="cn_2broker_8h.html#a295b2bf867751fe73266a7c7180ec053" title="Wait for the messages that are wanted by the subscriber.">cn_subscriber_await()</a> and <a class="el" href="cn_2broker_8h.html#abedc2b3d7f0c3b9dafcd1a18ace5c7d1" title="Poll for the messages that are wanted by the subscriber.">cn_subscriber_poll()</a> call this function automatically, there is no need to release the last received message if the subscriber attempts to receive another message. </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
